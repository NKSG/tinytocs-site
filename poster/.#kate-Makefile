base = partitioning
images = images/*.eps

all: $(base).pdf

$(base).pdf: $(base).tex
	pdflatex $(base).tex
	bibtex $(base)
	pdflatex $(base).tex
	pdflatex $(base).tex

clean:
	rm -f *.log *.bbl *.blg *.aux *.dvi *.out *.*.backup $(base).ps $(base).pdf *.*~
	rm -f algorithms/*.*.backup
	rm -f $(base).zip
epsfix:
	for file in $(images); do \
		echo -n "Before: " ; \
		du -h --apparent-size $$file ; \
		eps2eps $$file $$file.2 && mv $$file.2 $$file ; \
		echo -n "After:  " ; \
		du -h --apparent-size $$file ; \
		echo "" ; \
	done
zip: $(base).pdf
	rm -f $(base).zip
	zip -r $(base).zip $(base).tex $(base).bib $(base).pdf\
		 sig-alternate.cls Makefile \
	       images/*.eps graphs/*.eps algorithms/*.tex 